{% extends "employee/layout.html" %}

{% block title %}
    Add Movie
{% endblock %}

{% block main %}
    {% if form %}
        <h3 class="color-dark">Add Movie</h3>
        <div class="border container cont-1 rounded shadow">
            <h5 class="color-light mb-4">Search Movie</h5>

            <form action="/add-movie" method="POST" class="needs-validation" novalidate>
                <div class="form-floating mb-3">
                    <input autocomplete="off" autofocus class="form-control {{t_feedback}}" name="title" placeholder="Title" type="text" required>
                    <label>Title</label>
                    <div class="invalid-feedback">
                        Please provide a title.
                    </div>
                </div>
                <div class="form-floating mb-3">
                    <input autocomplete="off" autofocus class="form-control {{y_feedback}}" name="year" placeholder="Release Year" type="text">
                    <label>Release Year</label>
                </div>
                <button class="btn btn-primary" type="submit">Search</button>
            </form>
        {% elif search_result %}
            <h3 class="color-dark mb-5">Search Results</h3>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4">
            {% for movie in result %}

                <div class="col">
                    <div class="card">
                        {% if movie['poster_path'] %}
                            <img src="https://image.tmdb.org/t/p/original{{movie['poster_path']}}" class="card-img-top" alt="Poster for {{movie['title']}}">
                        {% endif %}
                        <div class="card-body">
                            <span class="my-tooltip" data-bs-toggle="tooltip" title="{{movie['title']}}">
                                <h6 class="card-title text-truncate">{{movie['title']}}</h6>
                            </span>
                            <b>Release Date:</b><br> {{movie['release_date']}}<br><br>
                            <form action="/add-movie" method="POST">
                                <input type="hidden" name="m-id" value="{{movie['id']}}">
                                <button class="btn btn-primary" type="submit">Add Movie</button>
                            </form>
                        </div>
                    </div>
                </div>

            {% endfor %}
            </div>

        {% endif %}
    </div>
{% endblock %}